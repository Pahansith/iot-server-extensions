<span id="details" data-devicetype="{{deviceType}}" data-deviceid="{{deviceId}}" data-monitor="{{monitor_operations}}"></span>
<br/>
<div class="ast-container">
    <div class="container-fluid ">
        <div class="title">
            <a class="asset-type-deviceType">{{device.name}}</a>
        </div>
    </div>
</div>
<hr/>
<br/>
<div class="wr-device-list row">
    <div class="wr-hidden-operations wr-advance-operations">
    </div>
    <div class="col-md-12 wr-page-content">
        <div class="row">
            <div class="col-md-12 wr-stats-board">

                <!-- content -->

                <div class="col-lg-2 ast-desc-image">
                    <div class="row">
                        <div class="col-lg-12 col-sm-4">
                            <img src="{{url ""}}/storage/deviceType/{{device.assetId}}/images_thumbnail"
                                 style="width:200px"/>
                        </div>
                        <div class="col-lg-12 col-sm-4 ast-desc">
                            <div class="ast-device-desc"><b>Owner:</b> {{device.owner}}</div>
                            <div class="ast-device-desc"><b>Date of Enrolment:</b><br/> <span
                                    class="formatDate">{{device.dateOfEnrolment}}</span></div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-10 tiles">

                    <!-- device summary -->
                    <div class="row">

                        <div class="top-device-details">
                            <i class="fw fw-focus"></i>&nbsp;&nbsp;<label id="last_seen">Connecting</label>
                        </div>

                    </div>
                    <!-- /device summary -->

                    <div class="panel-group" id="accordion" role="tablist"
                         aria-multiselectable="true">

                        <!--control device -->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h2 class="sub-title panel-title">
                                    <a data-toggle="collapse"
                                       href="#collapseOne" aria-expanded="true"
                                       aria-controls="collapseOne">
                                        <span class="fw-stack">
                                        <i class="fw fw-ring fw-stack-2x"></i>
                                        <i class="fw fw-arrow fw-down fw-stack-1x"></i>
                                        </span>
                                        Device Operations
                                    </a>
                                </h2>
                            </div>
                            <div id="collapseOne" class="panel-collapse collapse in"
                                 role="tabpanel" aria-labelledby="headingOne">
                                <div id="device-location" class="panel-body">
                                    {{#if control_operations}}
                                        {{#each control_operations}}
                                            <form action="{{url ""}}/apis/operations/{{../deviceType}}/{{operation}}?deviceId={{../deviceId}}" method="post">
                                                <div class="row">
                                                    <div class="wr-input-control">
                                                        <label class="wr-input-label">{{name}}</label>
                                                        <input type="number" name="value"
                                                               placeholder="{{description}}">
                                                        <button class="wr-btn">&nbsp;&nbsp;&nbsp;&nbsp;Send
                                                                               to Device&nbsp;&nbsp;&nbsp;&nbsp;</button>
                                                        <label id="lblSending" class="wr-input-label hidden"><i class="fw fw-lifecycle fw-spin fw-2x"></i> Sending..</label>
                                                        <label id="lblSent" class="wr-input-label hidden"><i class="fw fw-check fw-2x"></i> Sent</label>
                                                        <label id="lblLastState" class="wr-input-label wr-input-label-status"></label>
                                                    </div>
                                                </div>
                                            </form>
                                        {{/each}}
                                    {{/if}}
                                </div>
                            </div>
                        </div>
                        <!--/device location -->

                        <!-- statistics -->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingFour">
                                <h2 class="sub-title panel-title">
                                    <a data-toggle="collapse"
                                       href="#collapseTwo" aria-expanded="true"
                                       aria-controls="collapseTwo">
                                        <span class="fw-stack">
                                            <i class="fw fw-ring fw-stack-2x"></i>
                                            <i class="fw fw-arrow fw-down fw-stack-1x"></i>
                                        </span>
                                        Device Statistics
                                    </a>
                                </h2>
                            </div>
                            <div id="collapseTwo" class="panel-collapse collapse in"
                                 role="tabpanel"
                                 aria-labelledby="headingTwo">
                                <div class="panel-body">
                                    <div id="chartWrapper">
                                        <div id="y_axis" class="custom_y_axis"></div>
                                        <div class="legend_container">
                                            <div id="smoother" title="Smoothing"></div>
                                            <div id="legend"></div>
                                        </div>
                                        <div id="chart" class="custom_rickshaw_graph"></div>
                                        <div class="custom_x_axis"></div>
                                    </div>
                                    <div id="map" class="map-wrapper hidden">

                                    </div>
                                    <a class="padding-left" href="{{url ""}}/pages/analytics?deviceId={{deviceId}}&deviceType={{deviceType}}">
                                        <span class="fw-stack">
                                            <i class="fw fw-ring fw-stack-2x"></i>
                                            <i class="fw fw-statistics fw-stack-1x"></i>
                                        </span> View Device Analytics</a>
                                </div>
                            </div>
                        </div>
                        <!-- /statistics -->

                        <!-- events -->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingTwo">
                                <h2 class="sub-title panel-title">
                                    <a data-toggle="collapse"
                                       href="#collapseThree" aria-expanded="true"
                                       aria-controls="collapseThree">
                                        <span class="fw-stack">
                                            <i class="fw fw-ring fw-stack-2x"></i>
                                            <i class="fw fw-arrow fw-down fw-stack-1x"></i>
                                        </span>
                                        Device Events
                                    </a>
                                </h2>
                            </div>
                            <div id="collapseThree" class="panel-collapse collapse in"
                                 role="tabpanel"
                                 aria-labelledby="headingThree">
                                <div class="panel-body">
                                    {{#if data}}
                                        <div class="container container-bg  white-bg">
                                            <div class=" margin-top-double">
                                                <div class="row row padding-top-double padding-bottom-double margin-bottom-double">
                                                    <div id="event-stream-place-holder" style="padding-top: 20px;">
                                                        <div style="padding: 15px;">
                                                            <table class="table table-striped table-bordered">
                                                                <thead>
                                                                <tr>
                                                                    <th width="20%">Time</th>
                                                                    <th>Activity</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                {{#each data}}
                                                                    <tr>
                                                                        <td width="20%" class="formatDate">{{time}}</td>
                                                                        <td>{{activity}}</td>
                                                                    </tr>
                                                                {{/each}}
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {{else}}
                                        <div class="assets-container">
                                            <div class="top-assets-empty-assert">You don't have any
                                                                                 events logged at
                                                                                 the moment.
                                            </div>
                                        </div>
                                    {{/if}}
                                </div>
                            </div>
                        </div>
                        <!-- /event -->

                        <!-- policies -->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingTwo">
                                <h2 class="sub-title panel-title">
                                    <a data-toggle="collapse"
                                       href="#collapseFour" aria-expanded="true"
                                       aria-controls="collapseFour">
                                        <span class="fw-stack">
                                            <i class="fw fw-ring fw-stack-2x"></i>
                                            <i class="fw fw-arrow fw-down fw-stack-1x"></i>
                                        </span>
                                        Policies
                                    </a>
                                </h2>
                            </div>
                            <div id="collapseFour" class="panel-collapse collapse in"
                                 role="tabpanel"
                                 aria-labelledby="headingFour">
                                <div class="panel-body">
                                    {{#if policies}}
                                        <div class="wr-list-group wr-sortable">
                                            {{#each policies}}
                                                <span id="{{id}}" class="list-group-item">
                                <i class="wr-sortable-icon fw fw-sort hide"></i>
                                <i class="wr-list-icon fw fw-policy"></i>
                                <div class="wr-list-desc">
                                    <h3 class="wr-list-name">{{policyName}}</h3>
                                    <span class="wr-list-username">{{deviceType}} | Last Updated: <span
                                            class="formatDate">{{updated}}</span></span>
                                </div>
                                                </span>
                                            {{/each}}
                                        </div>
                                    {{else}}
                                        <!-- no policies found -->
                                        <div class="assets-container">
                                            <div class="top-assets-empty-assert">No defined
                                                                                 policies.
                                            </div>
                                        </div>
                                    {{/if}}
                                    <br/>
                                    <a class="padding-left" href="{{url ""}}/pages/policies/add?deviceId={{deviceId}}&deviceType={{deviceType}}">
                                        <span class="fw-stack">
                                            <i class="fw fw-ring fw-stack-2x"></i>
                                            <i class="fw fw-add fw-stack-1x"></i>
                                        </span> Add device specific policy</a>
                                </div>
                            </div>
                        </div>
                        <!-- /policies -->

                    </div>
                </div>

                <!-- /content -->

            </div>
        </div>
    </div>
</div>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCO-8KGLeoFkCeqID9BpY_Gh6GOKfaBPVc&callback=initMap">
</script>